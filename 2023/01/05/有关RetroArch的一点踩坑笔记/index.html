<html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Cerallin的笔记本，记录日常工作和日常折腾（笑），转载请注明出处。"><meta name="keyword"><title>Cerallin的笔记本 - 瞎折腾～～</title><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="/notes/css/style.css"><link rel="stylesheet" href="/notes/css/helpers.css"><script src="/notes/js/clipboard/clipboard.min.js"></script><script src="/notes/js/bootstrap.js"></script><script>Theme.counter={register:function(){request("//visitor-counter.cerallin.top/count.php/?page="+encodeURI(window.location.href),{method:"GET"}).then(e=>{for(const t in e){const n=document.getElementById(t);n&&(n.innerText=e[t])}}).catch(e=>{console.error("Fetching visit count failed.",e)})}}</script><style>body hl:after {
    content: ' ';
    display: inline;
    font-family: inherit;
    font-size: 0.45em;
}

html code hl,
html pre hl,
html kbd hl,
html samp hl,
html ruby hl,
html .tag-list-item hl {
    display: none;
}

html ol > hl,
html ul > hl {
    display: none;
}</style><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/notes/atom.xml" title="Cerallin的笔记本" type="application/atom+xml"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}</style></head><body><div class="loading-wrapper" data-loading="data-loading"><div class="loading"><span></span><span></span><span></span></div></div><div class="page" data-filter="data-filter"><div class="head" data-show="data-show"><header class="head-header"><div class="head-author"><a class="head-author-link" href="/notes/">Cerallin<hl></hl>的笔记本</a></div><div class="head-right"><button class="bar-wrap" id="bar-wrap-toggle"><span class="bar"></span><span class="bar"></span><span class="bar"></span></button><div class="head-item"><a class="search-button head-item-link"><span>搜索</span> <i class="icon icon-search"></i></a></div><div class="head-item"><a class="head-item-link" href="/notes/about">关于</a></div></div></header><div class="menubar-head" id="menubar"><ul class="menubar-ul"><li class="menubar-item"><i class="icon icon-chevron-right"></i> <a class="menubar-link" href="/notes/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%8E%E9%80%9A%E4%BF%A1%E5%B7%A5%E7%A8%8B/">计算机与通信工程</a></li><li class="menubar-item"><i class="icon icon-chevron-right"></i> <a class="menubar-link" href="/notes/categories/%E6%9D%90%E6%96%99%E7%A7%91%E5%AD%A6%E4%B8%8E%E5%B7%A5%E7%A8%8B/">材料科学与工程</a></li><li class="menubar-item"><i class="icon icon-chevron-right"></i> <a class="menubar-link" href="/notes/categories/%E7%9E%8E%E6%8A%98%E8%85%BE/">瞎折腾</a></li><li class="menubar-item"><i class="icon icon-chevron-right"></i> <a class="menubar-link" href="/notes/categories/C%E8%AF%AD%E8%A8%80%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">C<hl></hl>语言程序设计</a></li><li class="menubar-item"><i class="icon icon-chevron-right"></i> <a class="menubar-link" href="/notes/categories/%E6%B5%85%E6%80%9D/">浅思</a></li><li class="menubar-item" data-border="data-border"></li><li class="menubar-item"><i class="icon icon-archive"></i> <a class="menubar-link" href="/notes/archives">归档</a></li><li class="menubar-item"><i class="icon icon-tags"></i> <a class="menubar-link" href="/notes/tags">标签</a></li><li class="menubar-item" data-border="data-border"></li><li class="menubar-item"><a class="menubar-link" href="/notes/about"><span>关于</span></a></li></ul><div class="menu-search-box search-button"><div>搜索</div><i class="icon icon-search"></i></div></div></div><div class="main" data-page="post"><article class="post" id="post"><header class="post-head"><h1 class="post-title"><a class="title" href="/notes/2023/01/05/%E6%9C%89%E5%85%B3RetroArch%E7%9A%84%E4%B8%80%E7%82%B9%E8%B8%A9%E5%9D%91%E7%AC%94%E8%AE%B0/">有关<hl></hl>RetroArch<hl></hl>的一点踩坑笔记<hl></hl></a></h1></header><div class="post-meta"><div class="post-date"><time class="post-time" itemprop="datePublished" title="2023-01-05 14:03:32" datetime="2023-01-05T06:03:32.000Z">2023-01-05</time></div>|<div class="post-tag"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/RetroArch/" rel="tag">RetroArch</a></li></ul></div><div class="post-visit"><span id="page_pv">?</span><hl></hl>访问</div></div><div class="post-info"><div class="post-word-count">本文共<hl></hl>1,159<hl></hl>字。</div><div class="post-cc">版权声明：署名 | <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div><div class="article-entry" itemprop="articleBody"><blockquote><p>RetroArch<hl></hl>是一个跨平台的前端软件，为游戏机模拟器、游戏引擎和多媒体播放器提供统一的接口。自从<hl></hl>RetroArch<hl></hl>登录了<hl></hl>Steam，就可以统计古早游戏的游戏时长了，颇有成就感。但是，Steam<hl></hl>版的<hl></hl>RetroArch<hl></hl>与原版有些出入，导致有些问题很难通过网络搜索解决。更何况原版<hl></hl>RetroArch<hl></hl>配置模拟器后端就有很多坑，Steam<hl></hl>版<hl></hl>RetroArch<hl></hl>的配置难度只增不减。本文记录了一些<hl></hl>Steam<hl></hl>版<hl></hl>RetroArch<hl></hl>的配置流程，绝大多数情况都与原版<hl></hl>RetroArch<hl></hl>的配置流程相同，还有一部分是<hl></hl>Steam<hl></hl>版特有的步骤。</p></blockquote><span id="more"></span><h3 id="各种文档">各种文档</h3><p><a target="_blank" rel="noopener" href="https://www.retroarch.com/">RetroArch<hl></hl>官方网站</a></p><p><a target="_blank" rel="noopener" href="https://buildbot.libretro.com/">RetroArch build bot</a></p><p><a target="_blank" rel="noopener" href="https://docs.libretro.com/">Libretro<hl></hl>文档</a></p><h3 id="准备游戏">准备游戏</h3><p>下载游戏。</p><p>绝大多数游戏文件属于<hl></hl>“ROM image”，简称<hl></hl>ROM，是只读映像的意思。不同平台的游戏文件有不同的文件后缀，例如<hl></hl>Game Boy<hl></hl>的游戏可以以<hl></hl><code>gba</code><hl></hl>或者<hl></hl><code>gbc</code><hl></hl>结尾，NDS<hl></hl>的游戏以<hl></hl><code>nds</code><hl></hl>结尾。而<hl></hl>PS<hl></hl>的游戏，因为是以光盘为载体，因此一般以<hl></hl><code>img</code><hl></hl>或<hl></hl><code>iso</code><hl></hl>结尾。</p><p>为了成功读取光盘，需要配套的标记文件，标注了光盘映像的各个区域内容的起止，通常以<hl></hl><code>cue</code><hl></hl>结尾。对于我们的游戏而言，<code>CUE</code><hl></hl>文件结构非常简单，因为只需要标注游戏内容的起止范围即可，也就是全部范围。 <code>CUE</code><hl></hl>文件内容如下：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FILE "/path/to/game.img" BINARY</span><br><span class="line">    TRACK 01 MODE1/2352</span><br><span class="line">    INDEX 01 00:00:00</span><br></pre></td></tr></tbody></table></figure><p>有的大型游戏因为一个光盘装不下，会分成两三个盘。虽然读取第一个光盘即可开始游戏，但是<hl></hl>RetroArch<hl></hl>并没有实现游戏中间换盘的机制。因此需要在启动游戏之前告诉模拟器一共有几个游戏光盘。为此，我们还需要准备一个<hl></hl><code>m3u</code><hl></hl>文件，格式如下。</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/path/to/game (A).cue</span><br><span class="line">/path/to/game (B).cue</span><br></pre></td></tr></tbody></table></figure><h3 id="准备模拟器">准备模拟器</h3><h4 id="下载模拟器核心">下载模拟器核心</h4><p>RetroArch<hl></hl>是一个游戏机模拟器前端，需要对应的后端才能运行相应的游戏。 Steam<hl></hl>版<hl></hl>RetroArch<hl></hl>从<hl></hl>Steam<hl></hl>上以<hl></hl>DLC<hl></hl>的形式可以下载一部分支持的模拟器后端，但并不是全部，比如<hl></hl>PS2<hl></hl>的模拟器<hl></hl>PCSX2<hl></hl>就没有在<hl></hl>Steam<hl></hl>上架。此时我们需要手动下载，最好的去处就是官方的<hl></hl>build bot<hl></hl>网站。例如，当前<hl></hl>RetroArch<hl></hl>最新的稳定版版本号为<hl></hl>1.14.0，64<hl></hl>位<hl></hl>Windows<hl></hl>系统可以从<a target="_blank" rel="noopener" href="https://buildbot.libretro.com/stable/1.14.0/windows/x86_64/">这个页面</a>点击下载对应的<hl></hl>RetroArch_cores.7z。</p><p>当然，从<hl></hl>Steam<hl></hl>下载最大的好处就是可以自动更新模拟器核心，否则需要手动更新（经典模拟器的核心不需要更新这么频繁就是了）。</p><h4 id="下载对应的系统文件">下载对应的系统文件</h4><p>虽然模拟器不违法，但是厂商永远有办法给玩家添堵，即使是几十年前就已经停产了的怀旧机型。无一例外，所有模拟器都依赖于正版游戏机的一部分软件才能完整运行（通常为<hl></hl>BIOS）。出于法律方面的考虑，模拟器开发者不能直接将这部分内容直接提供给玩家，因此需要我们自己去互联网种发掘。模拟器需要什么文件可以查看相关文档确认，例如，<a target="_blank" rel="noopener" href="https://docs.libretro.com/library/pcsx2/#bios">PCSX2<hl></hl>核心推荐使用<hl></hl>SCPH-10000<hl></hl>型号的<hl></hl>BIOS</a>。</p><h3 id="最终设置">最终设置</h3><p>虽然现在像素风已经成为一种独特的美术风格，但是老游戏运行起来的画面的样子其实并不如设计师所想，也与当年的玩家所见不同。像素<hl></hl><span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.486ex" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="2.106ex" role="img" focusable="false" viewBox="0 -716 778 931"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2260" d="M166 -215T159 -215T147 -212T141 -204T139 -197Q139 -190 144 -183L306 133H70Q56 140 56 153Q56 168 72 173H327L406 327H72Q56 332 56 347Q56 360 70 367H426Q597 702 602 707Q605 716 618 716Q625 716 630 712T636 703T638 696Q638 692 471 367H707Q722 359 722 347Q722 336 708 328L451 327L371 173H708Q722 163 722 153Q722 140 707 133H351Q175 -210 170 -212Q166 -215 159 -215Z"></path></g></g></g></svg></mjx-container></span><hl></hl>糊，谁说当年的游戏就没有在追求立体感和真实感呢？为了最大地还原游戏想要呈现的显示效果，我们需要合适的<hl></hl>shader（着色器）。例如，为还原<hl></hl>psp、nds<hl></hl>等隔行扫描的屏幕，可以采用<hl></hl><code>crt-easymode</code><hl></hl>的着色器，每两行抽调一行，得到更好的显示效果。</p><p>当然，正如用钢琴演奏巴洛克时期的键琴作品并不显著地阻碍人们对艺术的欣赏，对游戏画面什么都不做在一部分人看来也许别有一番风味。</p><p>萝卜白菜各有所爱，还需自行定夺。</p><p><span class="mt-4 display-block text-indent-none"><em>P.S. Steam<hl></hl>版<hl></hl>RetroArch<hl></hl>不能识别核心的问题。</em></span></p><p>如果发现<hl></hl>RetroArch<hl></hl>中某个核心不能识别，而显示为<hl></hl><code>xxx.dll</code><hl></hl>的情况，则需要额外的步骤来修复。这是因为<hl></hl>RetroArch<hl></hl>没有关于该核心的信息造成的。从<hl></hl><a target="_blank" rel="noopener" href="https://buildbot.libretro.com/assets/frontend/">build bot<hl></hl>的前端资源</a>里下载<hl></hl><code>info.zip</code>，解压到<hl></hl>RetroArch<hl></hl>的<hl></hl>info<hl></hl>文件夹里，就可以了。</p><p><span class="display-block text-indent-none mt-4 mb-2 fw-600">Fin.</span></p></div></article><aside class="post-widget"><h4>目录<hl></hl></h4><nav class="post-toc-wrap" id="post-toc"><ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%90%84%E7%A7%8D%E6%96%87%E6%A1%A3"><span class="post-toc-number">1.</span> <span class="post-toc-text">各种文档<hl></hl></span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%87%86%E5%A4%87%E6%B8%B8%E6%88%8F"><span class="post-toc-number">2.</span> <span class="post-toc-text">准备游戏<hl></hl></span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%87%86%E5%A4%87%E6%A8%A1%E6%8B%9F%E5%99%A8"><span class="post-toc-number">3.</span> <span class="post-toc-text">准备模拟器<hl></hl></span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%B8%8B%E8%BD%BD%E6%A8%A1%E6%8B%9F%E5%99%A8%E6%A0%B8%E5%BF%83"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">下载模拟器核心<hl></hl></span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%AF%B9%E5%BA%94%E7%9A%84%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">下载对应的系统文件<hl></hl></span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%9C%80%E7%BB%88%E8%AE%BE%E7%BD%AE"><span class="post-toc-number">4.</span> <span class="post-toc-text">最终设置<hl></hl></span></a></li></ol></nav></aside></div><footer class="footer-nav"><div class="footer"><div class="back-top" id="back-top" title="Back to top"><i class="icon icon-chevron-bar-up"></i></div><div class="footer-content"><div class="footer-links"><div class="footer-links-column"><p><a title="Google Scholar" target="_blank" rel="noopener" href="https://scholar.google.com/">Google Scholar</a></p><p><a title="Google patents" target="_blank" rel="noopener" href="https://patents.google.com/">Google patents</a></p><p><a title="Bing Academic" target="_blank" rel="noopener" href="https://bing.com/academic/">Bing Academic</a></p></div><div class="footer-links-column"><p><a title="Web of Science" target="_blank" rel="noopener" href="https://www.webofscience.com/">Web of Science</a></p><p><a title="Science Direct" target="_blank" rel="noopener" href="https://www.sciencedirect.com/">Science Direct</a></p><p><a title="中国知网" target="_blank" rel="noopener" href="https://www.cnki.net/"><hl></hl>中国知网<hl></hl></a></p></div><div class="footer-links-column"><p><a title="arXiv" target="_blank" rel="noopener" href="https://arxiv.org/">arXiv</a></p><p><a title="JSTOR" target="_blank" rel="noopener" href="https://www.jstor.org/">JSTOR</a></p><p><a title="PubMed Central" target="_blank" rel="noopener" href="https://www.ncbi.nlm.nih.gov/pmc/">PubMed Central</a></p></div><div class="footer-links-column"><p><a title="MSI Eureka" target="_blank" rel="noopener" href="https://search.msi-eureka.com/search">MSI Eureka</a></p><p><a title="GitHub" target="_blank" rel="noopener" href="https://github.com/cerallin/">GitHub</a></p><p><a title="KUKE音乐" target="_blank" rel="noopener" href="https://www.kuke.com/">KUKE<hl></hl>音乐</a></p></div></div><div><span id="site_pv">?</span> PV <span id="site_uv">?</span> UV</div>Copyright © 2021<span class="time-divide">-</span>2024 Cerallin. Power by <a href="https://hexo.io/" target="_blank" rel="external nofollow">Hexo</a> and <a href="https://github.com/Cerallin/hexo-theme-yuzu" target="_blank" rel="external nofollow" title="v3.2.3">Theme Yuzu</a>.</div></div></footer><script>window.config={url_root:"/notes/",meta_path:"meta.json"}</script><script src="/notes/js/theme/back-to-top.js"></script><script src="/notes/js/theme/clipboard.js"></script><script src="/notes/js/theme/loading.js"></script><script src="/notes/js/theme/navbar.js"></script><script src="/notes/js/theme/search.js"></script><script src="/notes/js/theme/toc.js"></script><script>window.onload=function(){for(const n in Theme){const o=Theme[n];o.register()}}</script></div><div class="search-modal" id="search-modal"><div class="card"><div class="card-head"><div class="search-box"><input class="search-input" id="search-input" placeholder="搜索"><div class="search-button" id="search-button"><div class="icon icon-search"></div></div></div><div class="close-button"><div class="icon icon-x"></div></div></div><div class="card-body"><div class="search-count">共<hl></hl><span id="search-count-num">0</span><hl></hl>条搜索结果。</div><div class="search-result" id="search-result"></div></div></div></div></body></html>